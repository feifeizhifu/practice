<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        width: 100%;
        height: 100vh;
      }
    </style>
  </head>
  <body>
    <script>
      //   setTimeout(() => {
      //     console.log(1);
      //   });
      //   console.log(2);
      //   new Promise((resolve) => {
      //     console.log(3);
      //     resolve();
      //     console.log(4);
      //   })
      //     .then(() => {
      //       console.log(5);
      //     })
      //     .then(() => {
      //       console.log(6);
      //     });
      //   console.log(7);
      //   const fn = () => {
      //     console.log(8);
      //   };
      //   (async () => {
      //     console.log(9);
      //     await fn();
      //     console.log(10);
      //     await fn();
      //     console.log(12);
      //   })();
      //   console.log(13);
      //2 3 4 7 9 8 13 5 10 8 6 12 1
      //-----------------------------
      //   setTimeout(() => {
      //     console.log(1);
      //   }, 20);
      //   console.log(2);
      //   setTimeout(() => {
      //     console.log(3);
      //   }, 10);
      //   console.log(4);
      //   console.time("AA");
      //   for (let i = 0; i < 900000000; i++) {}
      //   console.timeEnd("AA");
      //   console.log(5);
      //   setTimeout(() => {
      //     console.log(6);
      //   }, 8);
      //   console.log(7);
      //   setTimeout(() => {
      //     console.log(8);
      //   }, 15);
      //   console.log(9);
      //2 4 5 7 9 6 3 8 1
      //-----------------------
      //   async function async1() {
      //     console.log("async1 start");
      //     await async2();
      //     console.log("async1 end");
      //   }
      //   async function async2() {
      //     console.log("async2");
      //   }
      //   console.log("script start");
      //   setTimeout(function () {
      //     console.log("setTimeout");
      //   });
      //   async1();
      //   new Promise(function (resolve) {
      //     console.log("promise1");
      //     resolve();
      //   }).then(function () {
      //     console.log("promise2");
      //   });
      //   console.log("script end");
      /*
      script start
      async1 start
      async2
      promise1
      script end
      async1 end
      promise2
      setTimeout
      */
      //-----------
      //   async function fn() {
      //     await new Promise((resolve) => {
      //       console.log(1);
      //       resolve();
      //       console.log(2);
      //     }).then(() => {
      //       console.log(3);
      //     });
      //     console.log(4);
      //   }
      //   fn();
      //   console.log(5);
      //------------------
      //dom事件是宏任务
      //   let body = document.body;
      //   body.addEventListener("click", function () {
      //     Promise.resolve().then(() => {
      //       console.log(1);
      //     });
      //     console.log(2);
      //   });
      //   body.addEventListener("click", function () {
      //     Promise.resolve().then(() => {
      //       console.log(3);
      //     });
      //     console.log(4);
      //   });
      //---------------------------
      //   console.log("start");
      //   let interObser;
      //   Promise.resolve()
      //     .then(() => {
      //       console.log("p1");
      //     })
      //     .then(() => {
      //       console.log("p2");
      //     });
      //   setTimeout(() => {
      //     Promise.resolve()
      //       .then(() => {
      //         console.log("p3");
      //       })
      //       .then(() => {
      //         console.log("p4");
      //       });
      //     interObser = setInterval(() => {
      //       console.log("interval");
      //     }, 3000);
      //     console.log("timeout1");
      //   }, 0);
      //start p1 p2 timeout1 p3 p4 interval
      //------------------
      //   setTimeout(() => {
      //     console.log("a");
      //   });
      //   Promise.resolve()
      //     .then(() => {
      //       console.log("b");
      //     })
      //     .then(() => {
      //       return Promise.resolve("c").then((data) => {
      //         setTimeout(() => {
      //           console.log("d");
      //         });
      //         console.log("f");
      //         return data;
      //       });
      //     })
      //     .then((data) => {
      //       console.log(data);
      //     });
      //b f c a d
      //-----------------
      function func1() {
        console.log("func1 start");
        return new Promise((resolve) => {
          resolve("ok");
        });
      }
      function func2() {
        console.log("func2 start");
        return new Promise((resolve) => {
          setTimeout(() => {
            resolve("ok");
          }, 10);
        });
      }
      console.log(1);
      setTimeout(async () => {
        console.log(2);
        await func1();
        console.log(3);
      }, 20);
      for (let i = 0; i < 90000000; i++) {}
      console.log(4);
      func1().then((result) => {
        console.log(5);
      });
      func2().then((result) => {
        console.log(6);
      });
      setTimeout(() => {
        console.log(7);
      }, 0);
      console.log(8);
      /* 
1 4 func1 start func2 start 8 5 2 func1 start 3 7 6 
      */
    </script>
  </body>
</html>
